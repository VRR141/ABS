CREATE TABLE categories(
                           id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                           category_name varchar(100)

);
CREATE TABLE items(
                      id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                      item_name varchar(100),
                      category_id int REFERENCES categories(id)

);
CREATE TABLE attribute(
                          id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                          attribute_name varchar(100)


);

CREATE TABLE values(
                       id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                       value_name varchar(100),
                       attribute_id int REFERENCES attribute(id)

);


CREATE TABLE articles(
                         id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                         price int,
                         amount int
);
CREATE TABLE item_values(
                            id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                            item_id int REFERENCES items(id),
                            value_id int REFERENCES values(id),
                            article_id int REFERENCES articles(id)
);
-- insert into categories values (2, 'одежда');
-- insert into items values (1, 'треуголка',1);
-- insert into items values (2, 'бандана',1);
-- insert into items values (3, 'рубашка',2);
-- insert into attribute values (1, 'цвет');
-- insert into attribute values (2, 'размер');
-- insert into attribute values (3, 'материал');
-- insert into values values (1, 'зеленый',1);
-- insert into values values (2, 'XL',2);
-- insert into values values (3, 'хлопок',3);
-- insert into articles values (1, 1,1200, 10);
-- insert into item_values values (1, 1,1, 1);
-- insert into item_values values (2, 1,2, 1);
-- insert into values values (4,'красный',1);
-- insert into values values (5,'S',2);
-- insert into articles values (2,1500,20);
-- insert into item_values values (3,2,4,2);
-- insert into item_values values (4,2,5,2);

CREATE TABLE pirates(
                        id     int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                        name  varchar(55) not null
);

CREATE TABLE roles(
                      id     int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                      name varchar(35) not null
);

create table pirates_roles
(
    pirate_id int not null ,
    role_id   int not null ,
    constraint pirate
        foreign key (pirate_id) references pirates (id),
    constraint role
        foreign key (role_id) references roles (id)
);

create table credentials
(
    id        int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    login     varchar(14) not null,
    password  varchar(14) not null,
    pirate_id int         null,
    activity_status boolean not null,
    constraint credentials_pirate
        foreign key (pirate_id) references pirates (id)
);

create table status
(
    id   int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name varchar(14) not null
);

CREATE TABLE orders(
                       id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                       order_date date,
                       completed_date date,
                       pirate_id      int      not null references pirates(id),
                       status_id      int      not null references status(id)
);

CREATE TABLE articles_orders(
                                id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                                article_id int REFERENCES articles(id),
                                order_id int REFERENCES orders(id),
                                amount int
);
-- insert into orders values (1,'2022-12-26', '2022-12-27',1,1);
-- insert into orders values (2,'2022-11-25','2022-12-29',2,2);
-- insert into articles_orders values (1,1, 1, 1);
-- insert into articles_orders values (2,2,2,1)